# 🔧 弹幕源管理

本服务支持灵活的弹幕源管理方式,您可以通过资源仓库加载或上传离线包来安装弹幕源。

![弹幕源管理](/screenshot/源管理.png)

## 1. 从资源仓库加载

### 配置资源仓库

1. 在 Web UI 的 "搜索源" 页面,找到 "资源仓库" 卡片
2. 在输入框中填入 GitHub 仓库链接或 CDN 加速链接

![资源仓库与搜索源](/screenshot/资源仓库与搜索源.png)

   **官方仓库:**
   ```
   https://github.com/l429609201/Misaka-Scraper-Resources
   ```

   **CDN 加速链接 (推荐,国内访问更快):**
   ```
   https://cdn.jsdelivr.net/gh/l429609201/Misaka-Scraper-Resources
   ```
   ```
   https://hk.gh-proxy.org/https://github.com/l429609201/Misaka-Scraper-Resources
   ```
   ```
   https://gh-proxy.org/https://github.com/l429609201/Misaka-Scraper-Resources
   ```
   ```
   https://proxy.pipers.cn/https://github.com/l429609201/Misaka-Scraper-Resources
   ```

3. 点击 "保存" 按钮保存配置

### 加载弹幕源

1. 配置好资源仓库后,点击 "加载资源" 按钮
2. 系统会自动:
   - 备份当前弹幕源
   - 从仓库下载最新的弹幕源文件
   - 安装到系统中
   - 重载弹幕源

### 版本信息

- **本地版本**: 显示当前安装的弹幕源版本
- **远程版本**: 显示资源仓库中的最新版本
- 如果远程版本更新,会显示 "有更新" 提示

## 2. 上传离线包

如果无法在线加载资源,可以使用离线包上传：

1. 访问 [资源仓库 Releases](https://github.com/l429609201/Misaka-Scraper-Resources/releases) 页面
2. 下载对应平台和架构的离线包（如 `linux-x86.zip`、`windows-arm.zip` 等）
3. 在 "搜索源" 页面点击 "离线包上传" 按钮
4. 选择下载的压缩包文件即可

## 3. 备份和恢复

### 自动备份

- 在加载资源或上传离线包时,系统会自动备份当前弹幕源
- 备份包含所有 `.so`/`.pyd` 文件、`package.json` 和 `versions.json`

### 手动备份

1. 在 "搜索源" 页面,找到 "备份管理" 区域
2. 点击 "备份当前弹幕源" 按钮
3. 系统会将当前弹幕源备份到持久化目录

### 恢复备份

1. 点击 "从备份还原" 按钮
2. 系统会:
   - 从备份目录恢复所有文件
   - 恢复 `package.json` 和 `versions.json`
   - 重载弹幕源

## 4. 重载弹幕源

在以下情况下,您可能需要手动重载弹幕源:

- 修改了弹幕源文件
- 更新了配置
- 系统提示需要重载

点击 "重载弹幕源" 按钮即可。

## 5. 注意事项

- **平台兼容性**: 确保离线包的平台和架构与您的系统匹配
- **备份重要性**: 在更新弹幕源前,系统会自动备份,但建议定期手动备份
- **版本管理**: 建议使用资源仓库方式,可以方便地查看和更新版本
- **网络要求**: 从资源仓库加载需要能够访问 GitHub,国内用户建议使用 CDN 加速链接

## 6. 故障排除

### 上传失败

- 检查文件格式是否为 `.zip` 或 `.tar.gz`
- 确认压缩包中包含 `versions.json`
- 验证平台和架构是否匹配

### 加载资源失败

- 检查资源仓库链接是否正确
- 确认网络可以访问 GitHub,国内用户建议使用 CDN 加速链接
- 如果使用 CDN 链接仍然失败,尝试切换到其他 CDN 节点
- 查看系统日志获取详细错误信息

### 重载失败

- 检查弹幕源文件是否完整
- 确认文件权限正确
- 尝试从备份恢复后再重载

1. 进入 **弹幕源** → **备份**
2. 点击 **导出配置**
3. 下载配置包

### 恢复弹幕源配置

1. 进入 **弹幕源** → **恢复**
2. 上传配置包
3. 确认恢复

## 常见问题

### 弹幕源安装失败

- 检查网络连接
- 查看系统日志
- 确认磁盘空间充足

### 弹幕源无法使用

- 检查弹幕源是否已启用
- 查看弹幕源配置是否正确
- 更新到最新版本

---

## 📚 相关文档

- **[🎬 弹幕API功能配置](/advanced/弹幕API功能配置)** - Token 管理等
- **[📱 客户端配置](/客户端配置)** - 配置播放器

