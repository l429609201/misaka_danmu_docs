# ğŸ”Œ å¤–éƒ¨æ§åˆ¶

æœ¬æœåŠ¡æä¾›å¤–éƒ¨æ§åˆ¶ APIï¼Œå…è®¸ç¬¬ä¸‰æ–¹åº”ç”¨æˆ–è„šæœ¬ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚

## å¯ç”¨å¤–éƒ¨æ§åˆ¶

1. è¿›å…¥ **"è®¾ç½®"** â†’ **"å¤–éƒ¨æ§åˆ¶"**
2. å¼€å¯ **"å¯ç”¨å¤–éƒ¨æ§åˆ¶"** å¼€å…³
3. é…ç½® API å¯†é’¥ï¼ˆç”¨äºè®¤è¯ï¼‰
4. ä¿å­˜é…ç½®

![å¤–éƒ¨æ§åˆ¶è®¾ç½®](/screenshot/å¤–éƒ¨æ§åˆ¶.png)

---

## API æ–‡æ¡£

å¯ç”¨å¤–éƒ¨æ§åˆ¶åï¼Œå¯ä»¥è®¿é—®å†…ç½®çš„ Swagger API æ–‡æ¡£ï¼š

**è®¿é—®åœ°å€**: `http://æ‚¨çš„æœåŠ¡åœ°å€:ç«¯å£/api/docs`

![Swagger API æ–‡æ¡£](/screenshot/å¤–éƒ¨æ§åˆ¶APIæ–‡æ¡£.png)

---

## è®¤è¯æ–¹å¼

æ‰€æœ‰å¤–éƒ¨æ§åˆ¶ API è¯·æ±‚éœ€è¦æºå¸¦ API å¯†é’¥ï¼š

```
?api_key=YOUR_API_KEY
```

---

## API æ¥å£åˆ—è¡¨

### å¯¼å…¥ç›¸å…³

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/import/auto` | POST | å…¨è‡ªåŠ¨æœç´¢å¹¶å¯¼å…¥ |
| `/api/control/search` | GET | æœç´¢åª’ä½“ |
| `/api/control/import/direct` | POST | ç›´æ¥å¯¼å…¥æœç´¢ç»“æœ |
| `/api/control/episodes` | GET | è·å–æœç´¢ç»“æœçš„åˆ†é›†åˆ—è¡¨ |
| `/api/control/import/edited` | POST | å¯¼å…¥ç¼–è¾‘åçš„åˆ†é›†åˆ—è¡¨ |
| `/api/control/import/url` | POST | é€šè¿‡URLå¯¼å…¥å¼¹å¹• |
| `/api/control/import/xml` | POST | é€šè¿‡XMLå¯¼å…¥å¼¹å¹• |

### å¼¹å¹•åº“ç®¡ç†

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/library/anime` | GET | è·å–å¼¹å¹•åº“åˆ—è¡¨ |
| `/api/control/library/anime` | POST | è‡ªå®šä¹‰åˆ›å»ºä½œå“ |
| `/api/control/library/anime/{animeId}` | GET | è·å–ä½œå“è¯¦æƒ… |
| `/api/control/library/anime/{animeId}` | PUT | ç¼–è¾‘ä½œå“ä¿¡æ¯ |
| `/api/control/library/anime/{animeId}` | DELETE | åˆ é™¤ä½œå“ |
| `/api/control/library/anime/{animeId}/sources` | GET | è·å–ä½œå“çš„æ‰€æœ‰æ•°æ®æº |
| `/api/control/library/anime/{animeId}/sources` | POST | ä¸ºä½œå“æ·»åŠ æ•°æ®æº |
| `/api/control/library/source/{sourceId}` | DELETE | åˆ é™¤æ•°æ®æº |
| `/api/control/library/source/{sourceId}/favorite` | PUT | ç²¾ç¡®æ ‡è®°æ•°æ®æº |
| `/api/control/library/source/{sourceId}/episodes` | GET | è·å–æºçš„åˆ†é›†åˆ—è¡¨ |
| `/api/control/library/episode/{episodeId}` | PUT | ç¼–è¾‘åˆ†é›†ä¿¡æ¯ |
| `/api/control/library/episode/{episodeId}` | DELETE | åˆ é™¤åˆ†é›† |
| `/api/control/library/episode/{episodeId}/refresh` | POST | åˆ·æ–°åˆ†é›†å¼¹å¹• |

### å¼¹å¹•ç®¡ç†

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/danmaku/{episodeId}` | GET | è·å–å¼¹å¹• |
| `/api/control/danmaku/{episodeId}` | POST | è¦†ç›–å¼¹å¹• |

### Token ç®¡ç†

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/tokens` | GET | è·å–æ‰€æœ‰Token |
| `/api/control/tokens` | POST | åˆ›å»ºToken |
| `/api/control/tokens/{tokenId}` | GET | è·å–å•ä¸ªTokenè¯¦æƒ… |
| `/api/control/tokens/{tokenId}` | PUT | æ›´æ–°Tokenä¿¡æ¯ |
| `/api/control/tokens/{tokenId}` | DELETE | åˆ é™¤Token |
| `/api/control/tokens/{tokenId}/logs` | GET | è·å–Tokenè®¿é—®æ—¥å¿— |
| `/api/control/tokens/{tokenId}/toggle` | PUT | å¯ç”¨/ç¦ç”¨Token |
| `/api/control/tokens/{tokenId}/reset` | POST | é‡ç½®Tokenè°ƒç”¨æ¬¡æ•° |

### ä»»åŠ¡ç®¡ç†

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/tasks` | GET | è·å–åå°ä»»åŠ¡åˆ—è¡¨ |
| `/api/control/tasks/{taskId}` | GET | è·å–å•ä¸ªä»»åŠ¡çŠ¶æ€ |
| `/api/control/tasks/{taskId}` | DELETE | åˆ é™¤ä»»åŠ¡ |
| `/api/control/tasks/{taskId}/abort` | POST | ä¸­æ­¢æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ |
| `/api/control/tasks/{taskId}/pause` | POST | æš‚åœæ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ |
| `/api/control/tasks/{taskId}/resume` | POST | æ¢å¤å·²æš‚åœçš„ä»»åŠ¡ |
| `/api/control/tasks/{taskId}/execution` | GET | è·å–æ‰§è¡Œä»»åŠ¡IDå’ŒçŠ¶æ€ |

### å®šæ—¶ä»»åŠ¡ç®¡ç†

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/scheduler/tasks` | GET | è·å–æ‰€æœ‰å®šæ—¶ä»»åŠ¡ |
| `/api/control/scheduler/{taskId}/last_result` | GET | è·å–å®šæ—¶ä»»åŠ¡æœ€è¿‘è¿è¡Œç»“æœ |

### æµæ§çŠ¶æ€

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/rate-limit/status` | GET | è·å–æµæ§çŠ¶æ€ï¼ˆæ”¯æŒSSEæµå¼æ¨é€ï¼‰ |

### è®¾ç½®ç®¡ç†

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/control/settings/danmaku-output` | GET | è·å–å¼¹å¹•è¾“å‡ºè®¾ç½® |
| `/api/control/settings/danmaku-output` | PUT | æ›´æ–°å¼¹å¹•è¾“å‡ºè®¾ç½® |
| `/api/control/config` | GET | è·å–å¯é…ç½®çš„å‚æ•°åˆ—è¡¨ |
| `/api/control/config` | PUT | æ›´æ–°æŒ‡å®šé…ç½®é¡¹ |

---

## ğŸ§ª æ¥å£è°ƒè¯•

ä»¥ä¸Šæ¥å£ä»…åˆ—å‡ºäº†è·¯å¾„å’ŒåŸºæœ¬è¯´æ˜ã€‚

**è¯¦ç»†çš„è¯·æ±‚å‚æ•°ã€å“åº”æ ¼å¼ã€å­—æ®µè¯´æ˜ç­‰ä¿¡æ¯ï¼Œè¯·åœ¨æ­å»ºé¡¹ç›®åè®¿é—®å†…ç½®çš„ Swagger æ–‡æ¡£è¿›è¡ŒæŸ¥çœ‹å’Œæµ‹è¯•ï¼š**

```
http://æ‚¨çš„æœåŠ¡åœ°å€:ç«¯å£/api/docs
```

Swagger æ–‡æ¡£æä¾›ï¼š
- å®Œæ•´çš„å‚æ•°è¯´æ˜å’Œç±»å‹å®šä¹‰
- åœ¨çº¿æµ‹è¯•åŠŸèƒ½ï¼ˆå¯ç›´æ¥å‘é€è¯·æ±‚ï¼‰
- è¯·æ±‚/å“åº”ç¤ºä¾‹
- é”™è¯¯ç è¯´æ˜

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **[ğŸ”— Webhook é…ç½®](/config/Webhooké…ç½®)** - è‡ªåŠ¨åŒ–è§¦å‘
- **[ğŸ¬ å¼¹å¹•åŠŸèƒ½é…ç½®](/advanced/å¼¹å¹•åŠŸèƒ½é…ç½®)** - Tokenç®¡ç†
- **[ğŸ“± å®¢æˆ·ç«¯é…ç½®](/å®¢æˆ·ç«¯é…ç½®)** - æ’­æ”¾å™¨é…ç½®

