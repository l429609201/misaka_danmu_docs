# 📺 媒体获取

本服务支持多种方式获取媒体条目信息，用于自动化弹幕导入流程。

## 获取方式

| 方式 | 说明 | 适用场景 |
|------|------|---------|
| 媒体服务读取 | 从 Emby/Jellyfin/Plex 获取 | 已有媒体服务器 |
| 本地扫描 | 扫描本地目录获取 | 无媒体服务器 |
| 扫描本地弹幕 | 扫描本地 .xml 弹幕文件 | 已有弹幕文件 |

---

## 从媒体服务读取

### 支持的媒体服务

- **Emby**
- **Jellyfin**
- **Plex**

### 配置步骤

1. 进入 **"设置"** → **"媒体服务"**
2. 选择您使用的媒体服务类型
3. 填写配置信息：
   - **服务器地址**: 如 `http://192.168.1.100:8096`
   - **API Key**: 媒体服务的 API 密钥
4. 点击 **"测试连接"** 验证配置
5. 保存配置

### 获取 API Key

#### Emby

1. 登录 Emby 管理后台
2. 进入 **"设置"** → **"高级"** → **"API 密钥"**
3. 点击 **"新建 API 密钥"**
4. 复制生成的密钥

#### Jellyfin

1. 登录 Jellyfin 管理后台
2. 进入 **"仪表盘"** → **"API 密钥"**
3. 点击 **"+"** 创建新密钥
4. 复制生成的密钥

#### Plex

1. 登录 Plex 账户
2. 进入 **"设置"** → **"账户"**
3. 获取 Plex Token

### 读取媒体库

配置完成后：

1. 进入 **"媒体获取"** 页面
2. 点击 **"读取媒体库"**
3. 系统会获取媒体服务中的所有影视条目
4. 选择需要导入弹幕的条目

![媒体库读取](/screenshot/媒体库读取.png)

---

## 本地扫描

### 功能说明

扫描本地目录，根据文件名和目录结构识别影视作品。

### 配置扫描目录

1. 进入 **"设置"** → **"本地扫描"**
2. 添加扫描目录路径
3. 配置扫描选项：
   - **递归扫描**: 是否扫描子目录
   - **文件类型**: 支持的视频格式（如 .mkv, .mp4, .avi）

### 执行扫描

1. 进入 **"媒体获取"** 页面
2. 点击 **"本地扫描"**
3. 系统会扫描配置的目录
4. 显示识别到的影视条目列表

![本地扫描](/screenshot/本地扫描.png)

### 目录结构建议

推荐使用标准的媒体库目录结构：

```
/媒体库/
├── 电影/
│   ├── 电影名称 (年份)/
│   │   └── 电影名称 (年份).mkv
│   └── ...
└── 剧集/
    ├── 剧集名称/
    │   ├── Season 01/
    │   │   ├── S01E01.mkv
    │   │   ├── S01E02.mkv
    │   │   └── ...
    │   └── ...
    └── ...
```

---

## 扫描本地弹幕

### 功能说明

扫描本地已有的 .xml 弹幕文件，直接导入到弹幕库。

### 配置扫描目录

1. 进入 **"设置"** → **"本地扫描"**
2. 添加弹幕文件所在目录
3. 配置扫描选项

### 执行扫描

1. 进入 **"媒体获取"** 页面
2. 点击 **"扫描弹幕"**
3. 系统会扫描目录中的 .xml 文件
4. 自动解析并导入弹幕

### 文件命名规范

为确保正确匹配，建议 XML 文件使用以下命名格式：

- 电影：`电影名称 (年份).xml`
- 剧集：`剧集名称 S01E01.xml` 或 `剧集名称 - 01.xml`

---

## 📚 相关文档

- **[📚 弹幕库管理](/advanced/弹幕库管理)** - 条目和分集管理
- **[🔗 Webhook 配置](/config/Webhook配置)** - 自动化弹幕导入
- **[🚀 快速开始](/快速开始)** - 部署指南

