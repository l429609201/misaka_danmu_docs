# 🔄 一键更新与更新历史

御坂网络弹幕服务提供了便捷的一键更新功能和完整的更新历史记录，让您可以轻松保持系统处于最新状态。

![更新日志-更新历史-一键更新](/screenshot/更新日志-更新历史-一键更新.png)

## 📋 功能概览

### 一键更新

- **自动检测**: 系统会自动检测是否有新版本可用
- **版本对比**: 显示当前版本与最新版本的对比信息
- **一键升级**: 点击按钮即可自动完成更新流程
- **更新日志**: 查看每个版本的更新内容和改进

### 更新历史

- **版本记录**: 完整记录所有历史版本信息
- **更新时间**: 显示每次更新的具体时间
- **变更详情**: 查看每个版本的详细变更内容

## 🚀 使用方法

### 检查更新

1. **进入更新页面**
   - 打开 Web UI
   - 点击顶部菜单的 **版本号**

2. **查看版本信息**
   - **当前版本**: 显示您当前安装的版本号
   - **最新版本**: 显示 GitHub 上发布的最新版本
   - **更新状态**: 提示是否有新版本可用

3. **查看更新内容**
   - 点击版本号可展开查看该版本的详细更新日志
   - 包括新功能、Bug 修复、性能优化等信息

### 执行更新

::: warning 更新前注意
- 建议在更新前备份数据库和配置文件
- 确保有足够的磁盘空间
- 更新过程中请勿关闭浏览器或终止服务
:::

1. **点击更新按钮**
   - 确认有新版本后，点击 **开始更新** 按钮
   - 系统会自动下载并安装新版本

2. **等待更新完成**
   - 更新过程中会显示进度信息
   - 通常需要几分钟时间，取决于网络速度

3. **重启服务**
   - 更新完成后，系统会提示重启
   - 然后刷新网页

### Docker 用户更新

如果您使用 Docker 部署，也可以通过命令行更新：

```bash
# 拉取最新镜像
docker pull l429609201/misaka_danmu_server:latest

# 重启容器
docker-compose down
docker-compose up -d
```

或者使用 docker-Copilot 实现更新：

```yaml
# docker-compose.yml 添加 docker-Copilot 服务
services:
  dockerCopilot:
    container_name: dockerCopilot
    environment:
      - secretKey=你的密码
      - DOCKER_HOST=unix:///var/run/docker.sock
      - hubURL=https://docker.nju.edu.cn
    image: 0nlylty/dockercopilot:latest
    ports:
      - '12712:12712'
    restart: always
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data:/data
version: '3.1'
```

## 📝 更新日志说明

### 版本号规则

版本号遵循语义化版本规范 (Semantic Versioning)：

- **主版本号 (Major)**: 重大更新，可能包含不兼容的 API 变更
- **次版本号 (Minor)**: 新功能添加，向下兼容
- **修订号 (Patch)**: Bug 修复和小改进

例如：`v2.3.8`
- `2` = 主版本号
- `3` = 次版本号  
- `8` = 修订号

### 更新类型标识

更新日志中常见的标识：

| 标识 | 说明 |
|------|------|
| ✨ **新功能** | 新增的功能特性 |
| 🐛 **修复** | Bug 修复 |
| ⚡ **优化** | 性能优化 |
| 🔧 **调整** | 配置或行为调整 |
| 📝 **文档** | 文档更新 |
| 🗑️ **移除** | 废弃或移除的功能 |

## ⚙️ 更新配置

### GitHub Token 配置

为了提高更新检测的稳定性，建议配置 GitHub Token：

1. 进入 **设置** → **参数配置** → **安全设置**
2. 填入您的 GitHub Personal Access Token
3. 这可以避免 GitHub API 的速率限制

### 更新源配置

默认从 GitHub Releases 获取更新，如果网络访问受限，可以：

1. 配置代理服务器
2. 使用镜像源（如果可用）
3. 手动下载更新包进行离线更新

## 🔍 查看更新历史

### 在线查看

访问 [GitHub Releases](https://github.com/l429609201/misaka_danmu_server/releases) 页面查看完整的版本发布历史。

### 本地查看

在 Web UI 的更新日志页面，可以：

1. **筛选版本**: 按版本号或日期筛选
2. **搜索内容**: 搜索特定的更新内容
3. **展开详情**: 点击版本卡片查看完整更新日志

![查看历史更新日志](/screenshot/查看历史更新日志.png)

## ⚠️ 常见问题

### 更新失败怎么办？

1. **检查网络连接**: 确保能够访问 GitHub
2. **检查磁盘空间**: 确保有足够的存储空间
3. **查看日志**: 在系统日志中查看详细错误信息
4. **手动更新**: 尝试通过 Docker 命令手动更新


## 📚 相关文档

- **[🔧 弹幕源管理](/advanced/弹幕源管理)** - 更新弹幕源
- **[⚙️ 设置](/config/设置)** - 系统配置
- **[📋 更新日志](/更新日志)** - 完整更新历史

