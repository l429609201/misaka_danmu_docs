# 🎬 弹幕功能配置

本文档介绍弹幕功能的详细配置选项。

[[toc]]

## Token 管理

### 创建 Token

1. 登录 Web UI
2. 进入 **设置** → **API Token**
3. 点击 **创建新 Token**
4. 填写：
   - **名称**: Token 用途描述
   - **权限**: 选择权限范围
   - **过期时间**: 可选
5. 保存并复制 Token

### Token 权限

- **只读** - 仅查询弹幕
- **读写** - 查询和上传弹幕
- **管理** - 完全控制权限

### 撤销 Token

在 Token 列表中点击 **撤销** 按钮。

## 弹幕输出控制

### 弹幕密度

控制返回的弹幕数量：

- **低密度** - 30%
- **中密度** - 60%（默认）
- **高密度** - 100%

### 弹幕过滤

可以过滤以下类型的弹幕：

- 顶部弹幕
- 底部弹幕
- 彩色弹幕
- 高级弹幕

### 时间偏移

如果弹幕时间不同步，可以设置全局时间偏移（秒）。

## 存储配置

### 自定义存储路径

**通过环境变量**：

```yaml
environment:
  - DANMUAPI_STORAGE__PATH=/custom/path
```

**通过 Web UI**：

进入 **设置** → **存储配置** → 修改路径

### 缓存设置

- **缓存时间** - 弹幕缓存有效期（默认 7 天）
- **自动清理** - 定期清理过期缓存

## 弹幕来源优先级

设置多个弹幕源的查询优先级：

1. 本地上传的弹幕
2. 弹幕源 A
3. 弹幕源 B
4. ...

## 常见问题

### 弹幕不显示

参考 [常见问题 - 弹幕加载失败](/faq#danmu-load-fail)

### 弹幕时间不同步

设置时间偏移或在客户端调整。

---

## 📚 相关文档

- **[🔧 弹幕源管理](/advanced/sources)** - 管理弹幕源
- **[📱 客户端配置](/client)** - 配置播放器

